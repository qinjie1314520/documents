coredns无法运行
编辑 coredns的configmap
kubectl edit cm coredns -n kube-system
删除loop
删除两个kubectl delete pod coredns-xxx-xxxx     -n kube-system


kubectl get pod --all-namespaces  查看全部节点

kubectl describe pod coredns-6d56c8448f-66qkj -n kube-system 查看节点详情



kubectl delete -f recommended.yaml  删除
kubectl create -f recommended.yaml  创建


wget https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml 获取配置文件
kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml
kubectl delete pod coredns-xxx-xxxx     -n kube-system 删除pod
https://segmentfault.com/a/1190000013681047 可用教程
kubectl -n kube-system describe $(kubectl -n kube-system get secret -n kube-system -o name | grep namespace) | grep token  相关获取登陆token

kubectl describe node shoot--k8s-train--shacw46-worker-l9qsr-z1-5869bb9948-4cz7w 查看节点明细

kubeadm init --apiserver-advertise-address=192.168.171.132 --image-repository registry.aliyuncs.com/google_containers  --service-cidr=10.10.0.0/16 --pod-network-cidr=10.122.0.0/16

kubeadm reset
[reset] Unmounting mounted directories in "/var/lib/kubelet"
[reset] Deleting contents of config directories: [/etc/kubernetes/manifests /etc/kubernetes/pki]
[reset] Deleting files: [/etc/kubernetes/admin.conf /etc/kubernetes/kubelet.conf /etc/kubernetes/bootstrap-kubelet.conf /etc/kubernetes/controller-manager.conf /etc/kubernetes/scheduler.conf]
[reset] Deleting contents of stateful directories: [/var/lib/etcd /var/lib/kubelet /var/lib/dockershim /var/run/kubernetes /var/lib/cni]

rm -rf /var/lib/kubelet
rm -rf /etc/kubernetes/manifests 
rm -rf /etc/kubernetes/pki
rm /etc/kubernetes/admin.conf 
rm /etc/kubernetes/kubelet.conf 
rm /etc/kubernetes/bootstrap-kubelet.conf 
rm /etc/kubernetes/controller-manager.conf 
rm /etc/kubernetes/scheduler.conf
rm -rf /var/lib/etcd /var/lib/kubelet
rm -rf /var/lib/dockershim
rm -rf /var/run/kubernetes 
rm -rf /var/lib/cni


Then you can join any number of worker nodes by running the following on each as root:

kubeadm join 192.168.171.132:6443 --token n4rhib.7rcpz9i0qih347w4 \
    --discovery-token-ca-cert-hash sha256:518fc5a6363d617aa8503f46c3bdcc29808d176711960708ec05fb055502d843